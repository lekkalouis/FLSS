<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>FLOCS ‚Äî Flippen Lekka Order Capturing System</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    :root {
      --bg:#f5f7fb;
      --panel:#ffffff;
      --panel-soft:#f1f5f9;
      --panel-strong:#e2e8f0;
      --accent:#38bdf8;
      --accent-soft:rgba(56,189,248,.18);
      --accent-strong:rgba(34,197,94,.9);
      --danger:#ef4444;
      --text:#0f172a;
      --muted:#5b6b7f;
      --radius-lg:.85rem;
      --radius-md:.6rem;
      --sans:-apple-system,BlinkMacSystemFont,Inter,Roboto,"Segoe UI",system-ui,sans-serif;
      --mono:ui-monospace,SFMono-Regular,Menlo,Consolas,monospace;
    }
    * { box-sizing:border-box; }

    body {
      margin:0;
      min-height:100vh;
      background:radial-gradient(circle at 10% 10%, rgba(56,189,248,.15) 0%, rgba(245,247,251,0) 55%),
                 radial-gradient(circle at 90% 15%, rgba(236,72,153,.08) 0%, rgba(245,247,251,0) 55%),
                 var(--bg);
      color:var(--text);
      font-family:var(--sans);
    }

    .flocs-shell {
      max-width:1200px;
      margin:0 auto;
      padding:1.25rem .9rem 2.5rem;
    }

    header.flocs-header {
      display:flex;
      flex-wrap:wrap;
      align-items:flex-start;
      justify-content:space-between;
      gap:.75rem;
      margin-bottom:1rem;
    }

    .flocs-titleBlock {
      display:flex;
      flex-direction:column;
      gap:.35rem;
    }
    .flocs-title {
      font-size:1.15rem;
      font-weight:700;
      letter-spacing:.04em;
      text-transform:uppercase;
    }
    .flocs-sub {
      font-size:.8rem;
      color:var(--muted);
    }
    .flocs-badge {
      display:inline-flex;
      align-items:center;
      gap:.45rem;
      background:var(--panel);
      border-radius:999px;
      padding:.25rem .75rem;
      font-size:.75rem;
      border:1px solid var(--panel-strong);
      color:var(--text);
    }
    .flocs-headerActions {
      display:flex;
      align-items:center;
      gap:.5rem;
      flex-wrap:wrap;
      justify-content:flex-end;
    }
    .flocs-linkBtn {
      display:inline-flex;
      align-items:center;
      gap:.4rem;
      padding:.3rem .75rem;
      border-radius:999px;
      border:1px solid var(--panel-strong);
      background:var(--panel);
      color:var(--text);
      font-size:.75rem;
      text-decoration:none;
      transition:all .2s ease;
    }
    .flocs-linkBtn:hover {
      border-color:rgba(56,189,248,.7);
      color:#0c4a6e;
    }
    .flocs-dot {
      width:.45rem; height:.45rem;
      border-radius:999px;
      background:#22c55e;
      box-shadow:0 0 10px rgba(34,197,94,.9);
    }

    .flocs-layout {
      display:flex;
      gap:1rem;
      align-items:flex-start;
    }
    @media (max-width:900px) {
      .flocs-layout { flex-direction:column; }
    }

    .flocs-panel {
      background:linear-gradient(to bottom right,rgba(255,255,255,.98),rgba(241,245,249,.9));
      border-radius:var(--radius-lg);
      border:1px solid var(--panel-strong);
      box-shadow:0 18px 40px rgba(15,23,42,.1);
      padding:1rem;
      position:relative;
    }

    .flocs-panel.form {
      flex:1.15;
      min-width:0;
    }
    .flocs-panel.flocs-sidebar {
      flex:0 0 260px;
      max-width:260px;
      min-width:220px;
      padding:.75rem;
      background:radial-gradient(circle at 0 0,rgba(56,189,248,.15),transparent 70%),
                 linear-gradient(to bottom right,rgba(255,255,255,.98),rgba(241,245,249,.92));
    }
    .flocs-panel.flocs-sidebar .flocs-previewHeader {
      flex-direction:column;
      align-items:flex-start;
      gap:.5rem;
    }
    .flocs-panel.flocs-sidebar .flocs-previewTag {
      align-self:flex-start;
    }
    .flocs-panel.flocs-sidebar .flocs-invoice {
      font-size:.7rem;
      line-height:1.2;
      max-height:70vh;
      overflow:auto;
    }
    .flocs-panel.flocs-sidebar .flocs-invoiceTable th,
    .flocs-panel.flocs-sidebar .flocs-invoiceTable td {
      font-size:.65rem;
      padding:.35rem .4rem;
    }
    .flocs-panel.flocs-sidebar .flocs-invoiceTotalsRow {
      font-size:.65rem;
    }
    @media (max-width:900px) {
      .flocs-panel.flocs-sidebar {
        width:100%;
        max-width:none;
        min-width:0;
      }
    }

    .flocs-formSection {
      margin-bottom:.9rem;
      padding-bottom:.75rem;
      border-bottom:1px dashed rgba(148,163,184,.45);
    }
    .flocs-formSection:last-of-type {
      border-bottom:none;
      padding-bottom:0;
      margin-bottom:0;
    }

    .flocs-labelRow {
      display:flex;
      justify-content:space-between;
      align-items:flex-end;
      margin-bottom:.35rem;
      gap:.5rem;
    }
    .flocs-labelRow span {
      font-size:.8rem;
      font-weight:600;
      text-transform:uppercase;
      letter-spacing:.06em;
      color:var(--muted);
    }
    .flocs-hint {
      font-size:.7rem;
      color:var(--muted);
    }

    .flocs-input,
    .flocs-select {
      width:100%;
      border-radius:.55rem;
      border:1px solid var(--panel-strong);
      background:#fff;
      color:var(--text);
      padding:.45rem .6rem;
      font-size:.85rem;
      outline:none;
      font-family:var(--sans);
    }
    .flocs-input:focus,
    .flocs-select:focus {
      border-color:var(--accent);
      box-shadow:0 0 0 1px rgba(56,189,248,.4);
    }

    .flocs-row {
      display:flex;
      gap:.5rem;
    }
    .flocs-row > * { flex:1; }
    @media (max-width:700px) {
      .flocs-row { flex-direction:column; }
    }

    .flocs-customerResults {
      margin-top:.4rem;
      max-height:190px;
      overflow:auto;
      border-radius:.6rem;
      border:1px solid var(--panel-strong);
      background:#fff;
    }
    .flocs-subSection {
      margin-top:.6rem;
      padding:.6rem;
      border-radius:.6rem;
      border:1px dashed rgba(148,163,184,.55);
      background:rgba(248,250,252,.9);
    }
    .flocs-customerItem {
      padding:.4rem .55rem;
      font-size:.8rem;
      cursor:pointer;
      border-bottom:1px solid rgba(226,232,240,.9);
    }
    .flocs-customerItem:hover {
      background:rgba(56,189,248,.14);
    }
    .flocs-customerItem strong {
      display:block;
      margin-bottom:.15rem;
    }
    .flocs-customerItem-meta {
      color:var(--muted);
      font-size:.7rem;
    }
    .flocs-customerEmpty {
      padding:.5rem .6rem;
      font-size:.75rem;
      color:var(--muted);
    }
    .flocs-inlineActions {
      display:flex;
      gap:.5rem;
      align-items:center;
      flex-wrap:wrap;
    }
    .flocs-miniBtn {
      padding:.3rem .65rem;
      border-radius:999px;
      border:1px solid rgba(148,163,184,.5);
      background:rgba(15,23,42,.9);
      color:var(--text);
      font-size:.7rem;
      text-transform:uppercase;
      letter-spacing:.05em;
      cursor:pointer;
    }
    .flocs-miniBtn:hover {
      border-color:var(--accent);
      color:var(--accent);
    }

    .flocs-chipRow {
      display:flex;
      flex-wrap:wrap;
      gap:.35rem;
      margin-top:.3rem;
    }
    .flocs-chip {
      padding:.18rem .55rem;
      border-radius:999px;
      border:1px solid rgba(148,163,184,.4);
      font-size:.7rem;
      color:var(--muted);
    }

    .flocs-radioGroup {
      display:flex;
      flex-wrap:wrap;
      gap:.45rem;
    }
    .flocs-radioPill {
      position:relative;
      display:inline-flex;
      align-items:center;
      gap:.35rem;
      padding:.25rem .6rem;
      border-radius:999px;
      border:1px solid rgba(148,163,184,.4);
      font-size:.8rem;
      cursor:pointer;
      user-select:none;
    }
    .flocs-radioPill input {
      appearance:none;
      width:.7rem; height:.7rem;
      border-radius:999px;
      border:1px solid rgba(148,163,184,.5);
      background:transparent;
      position:relative;
    }
    .flocs-radioPill input:checked {
      border-color:#22c55e;
      box-shadow:0 0 0 2px rgba(34,197,94,.5);
    }
    .flocs-radioPill input:checked::after {
      content:"";
      position:absolute;
      inset:.13rem;
      border-radius:inherit;
      background:#22c55e;
    }

    .flocs-addressPreview {
      margin-top:.35rem;
      padding:.45rem .55rem;
      border-radius:.45rem;
      font-size:.75rem;
      border:1px dashed rgba(148,163,184,.55);
      background:rgba(248,250,252,.9);
      white-space:pre-line;
    }

    .flocs-productsTable {
      width:100%;
      border-collapse:collapse;
      font-size:.78rem;
      border-radius:.6rem;
      overflow:hidden;
      border:1px solid var(--panel-strong);
      background:#fff;
    }
    .flocs-productsTable thead {
      background:var(--panel-soft);
    }
    .flocs-productsTable th,
    .flocs-productsTable td {
      padding:.3rem .45rem;
      border-bottom:1px solid rgba(226,232,240,.9);
    }
    .flocs-productsTable th {
      text-align:left;
      font-weight:600;
      color:var(--muted);
      text-transform:uppercase;
      letter-spacing:.06em;
      font-size:.7rem;
    }
    .flocs-productsTable tbody tr:last-child td {
      border-bottom:none;
    }
    .flocs-productsTable code {
      font-family:var(--mono);
      font-size:.78rem;
    }
    .flocs-filterRow {
      display:flex;
      flex-wrap:wrap;
      gap:.5rem;
      margin-top:.4rem;
      align-items:center;
    }
    .flocs-filterRow .flocs-select {
      min-width:170px;
      flex:1;
    }
    .flocs-filterHint {
      font-size:.7rem;
      color:var(--muted);
    }
    .flocs-qtyInput {
      width:4.2rem;
      border-radius:.45rem;
      border:1px solid var(--panel-strong);
      background:#fff;
      color:var(--text);
      padding:.2rem .35rem;
      font-size:.78rem;
      text-align:right;
      outline:none;
      font-family:var(--sans);
    }
    .flocs-qtyInput:focus {
      border-color:var(--accent);
      box-shadow:0 0 0 1px rgba(56,189,248,.45);
    }
    .flocs-qtyWrap {
      display:flex;
      align-items:center;
      gap:.25rem;
      justify-content:flex-end;
    }
    .flocs-qtyBtn {
      width:1.8rem;
      height:1.8rem;
      border-radius:999px;
      border:1px solid var(--panel-strong);
      background:#fff;
      color:var(--text);
      cursor:pointer;
      font-weight:700;
    }
    .flocs-qtyBtn:hover {
      border-color:var(--accent);
      color:var(--accent);
    }
    .flocs-productResults {
      margin-top:.45rem;
      max-height:180px;
      overflow:auto;
      border-radius:.6rem;
      border:1px solid var(--panel-strong);
      background:#fff;
    }
    .flocs-productItem {
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:.5rem;
      padding:.4rem .55rem;
      border-bottom:1px solid rgba(226,232,240,.9);
      font-size:.78rem;
    }
    .flocs-productItem:last-child {
      border-bottom:none;
    }
    .flocs-productMeta {
      color:var(--muted);
      font-size:.7rem;
    }

    .flocs-actionsRow {
      display:flex;
      justify-content:space-between;
      align-items:center;
      flex-wrap:wrap;
      gap:.5rem;
      margin-top:.55rem;
    }

    .flocs-btn {
      display:inline-flex;
      align-items:center;
      justify-content:center;
      gap:.35rem;
      border-radius:999px;
      border:none;
      font-size:.8rem;
      padding:.4rem .9rem;
      cursor:pointer;
      font-weight:600;
      letter-spacing:.05em;
      text-transform:uppercase;
      background:var(--accent-soft);
      color:#0c4a6e;
    }
    .flocs-btn span.icon {
      font-size:1rem;
      line-height:1;
    }
    .flocs-btn.primary {
      background:var(--accent);
      color:#0f172a;
    }
    .flocs-btn.primary:disabled {
      opacity:.4;
      cursor:default;
    }

    .flocs-badgeShipping {
      font-size:.75rem;
      color:var(--text);
    }

    .flocs-errors {
      margin-top:.4rem;
      font-size:.72rem;
      color:var(--danger);
      white-space:pre-line;
    }

    /* === Preview "invoice" card === */
    .flocs-previewHeader {
      display:flex;
      justify-content:space-between;
      align-items:flex-start;
      gap:.75rem;
      margin-bottom:.6rem;
    }
    .flocs-previewTitle {
      font-size:.9rem;
      font-weight:600;
      text-transform:uppercase;
      letter-spacing:.08em;
    }
    .flocs-previewTag {
      padding:.18rem .45rem;
      border-radius:999px;
      font-size:.7rem;
      background:var(--panel-soft);
      border:1px solid var(--panel-strong);
      color:var(--text);
    }

    .flocs-overrideWrap {
      display:flex;
      align-items:center;
      gap:.35rem;
    }
    .flocs-overrideBtn {
      border-radius:999px;
      border:1px solid var(--panel-strong);
      background:#fff;
      color:var(--text);
      font-size:.65rem;
      padding:.2rem .5rem;
      cursor:pointer;
      text-transform:uppercase;
      letter-spacing:.05em;
    }
    .flocs-overrideBtn.is-active {
      border-color:rgba(56,189,248,.8);
      background:var(--accent-soft);
      color:#0c4a6e;
      box-shadow:0 0 0 2px rgba(56,189,248,.2);
    }
    .flocs-overrideInput {
      width:5.5rem;
      border-radius:.45rem;
      border:1px solid var(--panel-strong);
      background:#fff;
      color:var(--text);
      padding:.2rem .35rem;
      font-size:.75rem;
      text-align:right;
      outline:none;
    }
    .flocs-overrideInput:disabled {
      opacity:.55;
      background:#f8fafc;
    }
    .flocs-overrideHint {
      font-size:.65rem;
      color:var(--muted);
      margin-top:.2rem;
    }
    .flocs-invoice {
      background:#f9fafb;
      color:#020617;
      border-radius:.7rem;
      padding:.75rem;
      font-size:.78rem;
    }
    .flocs-invoiceHeader {
      display:flex;
      justify-content:space-between;
      gap:.5rem;
      margin-bottom:.4rem;
    }
    .flocs-invoiceBrand {
      font-weight:700;
      font-size:.9rem;
    }
    .flocs-invoiceSub {
      font-size:.72rem;
      color:#4b5563;
    }
    .flocs-invoiceCols {
      display:flex;
      gap:.75rem;
      margin-bottom:.5rem;
    }
    .flocs-invoiceCol {
      flex:1;
      white-space:pre-line;
      font-size:.74rem;
      color:#111827;
    }
    .flocs-invoiceColTitle {
      font-weight:600;
      margin-bottom:.2rem;
      text-transform:uppercase;
      letter-spacing:.06em;
      font-size:.68rem;
      color:#6b7280;
    }
    .flocs-invoiceTable {
      width:100%;
      border-collapse:collapse;
      font-size:.74rem;
      margin-bottom:.4rem;
    }
    .flocs-invoiceTable th,
    .flocs-invoiceTable td {
      padding:.25rem .2rem;
      border-bottom:1px solid #e5e7eb;
    }
    .flocs-invoiceTable th {
      text-align:left;
      font-weight:600;
      text-transform:uppercase;
      letter-spacing:.06em;
      font-size:.66rem;
      color:#6b7280;
    }
    .flocs-invoiceTable td:last-child,
    .flocs-invoiceTable th:last-child {
      text-align:right;
    }
    .flocs-invoiceTotals {
      font-size:.75rem;
    }
    .flocs-invoiceTotalsRow {
      display:flex;
      justify-content:space-between;
    }
    .flocs-invoiceTotalsRow span.label {
      color:#4b5563;
    }
    .flocs-invoiceTotalsRow span.val {
      font-weight:600;
    }
    .flocs-invoiceNote {
      margin-top:.35rem;
      font-size:.7rem;
      color:#6b7280;
    }

    .flocs-toast {
      position:fixed;
      right:1rem;
      bottom:1rem;
      padding:.7rem .9rem;
      border-radius:.75rem;
      font-size:.78rem;
      background:rgba(15,23,42,.96);
      border:1px solid rgba(34,197,94,.6);
      color:#bbf7d0;
      max-width:260px;
      box-shadow:0 18px 60px rgba(0,0,0,.8);
      z-index:40;
      display:none;
    }

    /* === Ready glow & central confirm CTA === */
    .flocs-shell.flocs-ready .flocs-panel.form,
    .flocs-shell.flocs-ready .flocs-panel.flocs-sidebar {
      box-shadow:
        0 0 0 1px rgba(34,197,94,.65),
        0 0 0 5px rgba(22,163,74,.45),
        0 24px 70px rgba(22,163,74,.5);
      border-color:rgba(74,222,128,.7);
    }

    .flocs-confirmOverlay {
      position:fixed;
      inset:0;
      display:flex;
      align-items:center;
      justify-content:center;
      pointer-events:none;
      z-index:30;
      transition:opacity .15s ease;
      opacity:0;
    }
    .flocs-shell.flocs-ready .flocs-confirmOverlay {
      opacity:1;
      pointer-events:auto;
    }
    .flocs-shell.flocs-ready ~ .flocs-confirmOverlay {
      opacity:1;
      pointer-events:auto;
    }

    .flocs-confirmBtn {
      min-width:220px;
      border-radius:999px;
      border:none;
      padding:.7rem 1.4rem;
      font-size:.9rem;
      font-weight:700;
      text-transform:uppercase;
      letter-spacing:.12em;
      display:inline-flex;
      align-items:center;
      justify-content:center;
      gap:.6rem;
      background:var(--accent-strong);
      color:#022c22;
      box-shadow:0 0 0 2px rgba(187,247,208,.7),
                 0 24px 70px rgba(22,163,74,.7);
      cursor:pointer;
    }
    .flocs-confirmBtn span.icon {
      font-size:1.1rem;
    }
    .flocs-confirmBtn:disabled {
      opacity:.6;
      cursor:default;
      box-shadow:0 0 0 2px rgba(148,163,184,.7),
                 0 18px 45px rgba(15,23,42,.9);
    }
    .flocs-confirmActions {
      display:flex;
      align-items:center;
      gap:.75rem;
    }
    .flocs-disarmBtn {
      border-radius:999px;
      border:1px solid rgba(248,113,113,.8);
      background:rgba(248,113,113,.15);
      color:#fecaca;
      padding:.55rem 1rem;
      font-size:.8rem;
      font-weight:600;
      text-transform:uppercase;
      letter-spacing:.08em;
      cursor:pointer;
    }
    .flocs-armBtn {
      border-radius:999px;
      border:1px solid rgba(56,189,248,.7);
      background:rgba(56,189,248,.16);
      color:#e0f2fe;
      padding:.35rem .9rem;
      font-size:.7rem;
      font-weight:600;
      text-transform:uppercase;
      letter-spacing:.08em;
      cursor:pointer;
    }
    .flocs-convertBtn {
      border-radius:999px;
      border:1px solid rgba(14,165,233,.85);
      background:rgba(14,165,233,.18);
      color:#0c4a6e;
      padding:.35rem .9rem;
      font-size:.7rem;
      font-weight:600;
      text-transform:uppercase;
      letter-spacing:.08em;
      cursor:pointer;
    }
    .flocs-createOrderBtn {
      border-radius:999px;
      border:1px solid rgba(34,197,94,.85);
      background:rgba(34,197,94,.16);
      color:#065f46;
      padding:.35rem .9rem;
      font-size:.7rem;
      font-weight:600;
      text-transform:uppercase;
      letter-spacing:.08em;
      cursor:pointer;
    }
  </style>
</head>
<body>
  <div class="flocs-shell" id="flocs-shell">
    <header class="flocs-header">
      <div class="flocs-titleBlock">
        <div class="flocs-title">Flippen Lekka Order Capturing System</div>
        <div class="flocs-sub">FLOCS ¬∑ fast operator-friendly order entry into Shopify draft orders</div>
      </div>
      <div class="flocs-headerActions">
        <a class="flocs-linkBtn" href="/">
          <span>‚üµ</span>
          <span>Scan station</span>
        </a>
        <a class="flocs-linkBtn" href="/stock.html">
          <span>üì¶</span>
          <span>Stock take</span>
        </a>
        <div class="flocs-badge">
          <span class="flocs-dot"></span>
          <span>Backend: Scan Station Node/Express & SWE v28</span>
        </div>
      </div>
    </header>

    <main class="flocs-layout">
      <aside class="flocs-panel flocs-sidebar" aria-label="Invoice preview">
        <div class="flocs-previewHeader">
          <div>
            <div class="flocs-previewTitle">Invoice preview</div>
            <div class="flocs-hint">Compact customer-facing snapshot</div>
          </div>
          <div>
            <div id="flocs-previewTag" class="flocs-previewTag">Waiting for customer‚Ä¶</div>
            <button id="flocs-armBtn" class="flocs-armBtn" type="button" hidden>Arm lock</button>
            <button id="flocs-convertBtn" class="flocs-convertBtn" type="button" hidden>
              Convert draft to order
            </button>
            <button id="flocs-createOrderBtn" class="flocs-createOrderBtn" type="button" hidden>
              Create order now
            </button>
          </div>
        </div>

        <div class="flocs-invoice" id="flocs-invoice">
          <!-- Filled by JS -->
        </div>
      </aside>
      <!-- LEFT: FORM -->
      <section class="flocs-panel form" id="flocs-formPanel">
        <!-- Customer -->
        <div class="flocs-formSection">
          <div class="flocs-labelRow">
            <span>Customer</span>
            <span class="flocs-hint" id="flocs-customerStatus">Search by name, email, company, or phone</span>
          </div>
          <input id="flocs-customerSearch" class="flocs-input" type="text"
                 placeholder="Type to search Shopify customers‚Ä¶" autocomplete="off" />
          <div id="flocs-customerResults" class="flocs-customerResults" hidden></div>
          <div id="flocs-selectedCustomerChips" class="flocs-chipRow"></div>
          <div class="flocs-inlineActions" style="margin-top:.5rem">
            <button id="flocs-customerCreateToggle" class="flocs-miniBtn" type="button">
              Add new customer
            </button>
          </div>
          <div class="flocs-subSection" id="flocs-customerCreatePanel" hidden>
            <div class="flocs-labelRow">
              <span>Create new customer</span>
              <span class="flocs-hint" id="flocs-customerCreateStatus">Add a customer if search returns nothing.</span>
            </div>
            <div class="flocs-row">
              <input id="flocs-customerFirst" class="flocs-input" type="text" placeholder="First name" />
              <input id="flocs-customerLast" class="flocs-input" type="text" placeholder="Last name" />
            </div>
            <div class="flocs-row" style="margin-top:.4rem">
              <input id="flocs-customerEmail" class="flocs-input" type="email" placeholder="Email" />
              <input id="flocs-customerPhone" class="flocs-input" type="tel" placeholder="Phone" />
            </div>
            <div class="flocs-row" style="margin-top:.4rem">
              <input id="flocs-customerCompany" class="flocs-input" type="text" placeholder="Company (optional)" />
              <select id="flocs-customerDelivery" class="flocs-select">
                <option value="">Default delivery (optional)</option>
                <option value="ship">Ship</option>
                <option value="pickup">Pickup</option>
                <option value="deliver">Deliver</option>
              </select>
            </div>
            <div class="flocs-row" style="margin-top:.4rem">
              <input id="flocs-customerVat" class="flocs-input" type="text" placeholder="VAT number (optional)" />
            </div>
            <div class="flocs-row" style="margin-top:.4rem">
              <textarea id="flocs-customerDeliveryNotes" class="flocs-input" rows="2" placeholder="Delivery instructions (optional)"></textarea>
            </div>
            <div class="flocs-row" style="margin-top:.4rem">
              <input id="flocs-customerAddr1" class="flocs-input" type="text" placeholder="Address line 1" />
              <input id="flocs-customerAddr2" class="flocs-input" type="text" placeholder="Address line 2" />
            </div>
            <div class="flocs-row" style="margin-top:.4rem">
              <input id="flocs-customerCity" class="flocs-input" type="text" placeholder="City" />
              <input id="flocs-customerProvince" class="flocs-input" type="text" placeholder="Province" />
            </div>
            <div class="flocs-row" style="margin-top:.4rem">
              <input id="flocs-customerZip" class="flocs-input" type="text" placeholder="Postal code" />
              <input id="flocs-customerCountry" class="flocs-input" type="text" placeholder="Country" value="South Africa" />
            </div>
            <div class="flocs-inlineActions" style="margin-top:.5rem">
              <button id="flocs-customerCreateBtn" class="flocs-btn primary" type="button">
                <span class="icon">‚ûï</span><span>Create customer</span>
              </button>
              <button id="flocs-customerResetBtn" class="flocs-miniBtn" type="button">Clear form</button>
            </div>
          </div>
        </div>

        <!-- PO + Delivery method -->
        <div class="flocs-formSection">
          <div class="flocs-row">
            <div>
              <div class="flocs-labelRow">
                <span>Customer PO</span>
                <span class="flocs-hint">Stored on draft order note & metafield</span>
              </div>
              <input id="flocs-po" class="flocs-input" type="text" placeholder="PO / reference (optional)" />
            </div>
            <div>
              <div class="flocs-labelRow">
                <span>Delivery type</span>
                <span class="flocs-hint">Uses customer metafield custom.delivery_method if set</span>
              </div>
              <div class="flocs-radioGroup" id="flocs-deliveryGroup">
                <label class="flocs-radioPill">
                  <input type="radio" name="delivery" value="ship" checked />
                  <span>Ship</span>
                </label>
                <label class="flocs-radioPill">
                  <input type="radio" name="delivery" value="pickup" />
                  <span>Pickup</span>
                </label>
                <label class="flocs-radioPill">
                  <input type="radio" name="delivery" value="deliver" />
                  <span>Deliver (own vehicle)</span>
                </label>
              </div>
            </div>
          </div>
        </div>

        <!-- Billing address selector -->
        <div class="flocs-formSection" id="flocs-billSection">
          <div class="flocs-labelRow">
            <span>Billing address</span>
            <span class="flocs-hint">Pulled from customer‚Äôs Shopify addresses</span>
          </div>
          <select id="flocs-billingAddressSelect" class="flocs-select">
            <option value="">Select a customer first‚Ä¶</option>
          </select>
          <div id="flocs-billingAddressPreview" class="flocs-addressPreview" hidden></div>
        </div>

        <!-- Shipping address selector -->
        <div class="flocs-formSection" id="flocs-shipSection">
          <div class="flocs-labelRow">
            <span>Shipping address</span>
            <span class="flocs-hint">Saved to the draft order even for pickup/deliver</span>
          </div>
          <select id="flocs-addressSelect" class="flocs-select">
            <option value="">Select a customer first‚Ä¶</option>
          </select>
          <div id="flocs-addressPreview" class="flocs-addressPreview" hidden></div>
        </div>

        <!-- Product grid -->
        <div class="flocs-formSection">
        <div class="flocs-labelRow">
          <span>Items</span>
          <span class="flocs-hint" id="flocs-productStatus">Search by SKU or product title</span>
        </div>
          <div class="flocs-row" style="margin-bottom:.5rem">
            <select id="flocs-collectionSelect" class="flocs-select">
              <option value="">Load a collection‚Ä¶</option>
              <option value="most-popular-products">Most popular products (public)</option>
            </select>
            <button id="flocs-collectionLoadBtn" class="flocs-btn" type="button">
              <span class="icon">‚≠ê</span><span>Load collection</span>
            </button>
          </div>
          <div class="flocs-row" style="margin-bottom:.5rem">
            <input id="flocs-productSearch" class="flocs-input" type="text"
                   placeholder="Search Shopify products (SKU/title)..." autocomplete="off" />
            <input id="flocs-productCode" class="flocs-input" type="text"
                   placeholder="Filter by product code (exact SKU)..." autocomplete="off" />
          </div>
          <div id="flocs-productResults" class="flocs-productResults" hidden></div>
          <div class="flocs-actionsRow" id="flocs-productPager" hidden>
            <button id="flocs-productPrev" class="flocs-btn" type="button">
              <span class="icon">‚¨Ö</span><span>Previous</span>
            </button>
            <button id="flocs-productNext" class="flocs-btn" type="button">
              <span class="icon">‚û°</span><span>Next</span>
            </button>
          </div>
          <div class="flocs-filterRow">
            <select id="flocs-filterFlavour" class="flocs-select">
              <option value="">All flavours</option>
            </select>
            <select id="flocs-filterSize" class="flocs-select">
              <option value="">All sizes</option>
            </select>
            <span class="flocs-filterHint">Filter the quick order list by flavour & size.</span>
          </div>
          <table class="flocs-productsTable">
            <thead>
              <tr>
                <th>SKU</th>
                <th>Description</th>
                <th>Flavour</th>
                <th>Size</th>
                <th>Price</th>
                <th>Override</th>
                <th style="width:10%">Qty</th>
              </tr>
            </thead>
            <tbody id="flocs-productsBody">
              <!-- Populated by JS -->
            </tbody>
          </table>
          <div class="flocs-actionsRow">
            <button id="flocs-calcShip" class="flocs-btn" type="button">
              <span class="icon">‚õü</span><span>Calculate shipping (SWE quote)</span>
            </button>
            <div id="flocs-shippingSummary" class="flocs-badgeShipping">No shipping quote yet.</div>
          </div>
          <div id="flocs-errors" class="flocs-errors"></div>
        </div>
      </section>

    </main>
  </div>

  <!-- Global toast -->
  <div id="flocs-toast" class="flocs-toast"></div>

  <!-- Ready/confirm overlay -->
  <div id="flocs-confirmOverlay" class="flocs-confirmOverlay">
    <div class="flocs-confirmActions">
      <button id="flocs-confirmBtn" class="flocs-confirmBtn" type="button">
        <span class="icon">‚úÖ</span>
        <span>Lock order & create Shopify draft</span>
      </button>
      <button id="flocs-disarmBtn" class="flocs-disarmBtn" type="button">Disarm</button>
    </div>
  </div>

  <script src="/flocs.js"></script>
</body>
</html>
