<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>FLSS Hours Saved</title>
  <style>
    :root { --bg:#f8fafc; --panel:#fff; --ink:#0f172a; --muted:#64748b; --line:#cbd5e1; --accent:#2563eb; --ok:#0f766e; }
    body { margin:0; font-family: Inter, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif; background:var(--bg); color:var(--ink); }
    .shell { max-width: 1200px; margin: 0 auto; padding: 1rem; }
    .topbar { display:flex; align-items:center; justify-content:space-between; gap:1rem; margin-bottom:1rem; }
    .title { font-size:1.25rem; font-weight:800; }
    .controls { display:flex; gap:.5rem; flex-wrap:wrap; }
    select, button { border:1px solid var(--line); border-radius:.45rem; padding:.45rem .6rem; background:#fff; }
    button { background: var(--accent); color:#fff; border-color:var(--accent); cursor:pointer; }
    .grid { display:grid; gap: .75rem; }
    .cards { grid-template-columns: repeat(auto-fit, minmax(220px, 1fr)); }
    .card { background:var(--panel); border:1px solid var(--line); border-radius:.65rem; padding:.85rem; }
    .label { color:var(--muted); font-size:.78rem; text-transform:uppercase; letter-spacing:.03em; }
    .value { font-size:1.5rem; font-weight:800; margin-top:.2rem; }
    .value.small { font-size:1.1rem; }
    .row { display:grid; gap:.75rem; grid-template-columns:1fr; margin-top:.75rem; }
    @media (min-width: 980px){ .row { grid-template-columns:1fr 1fr; } }
    table { width:100%; border-collapse:collapse; font-size:.88rem; }
    th, td { text-align:left; padding:.45rem .35rem; border-bottom:1px solid #e2e8f0; }
    th { color:var(--muted); font-weight:700; }
    .hint { color: var(--muted); font-size:.78rem; margin-top:.3rem; }
    .stage-list { display:grid; gap:.45rem; margin-top:.5rem; }
    .stage-row { display:flex; justify-content:space-between; gap:1rem; font-size:.9rem; }
    .stage-row strong { color:var(--ok); }
  </style>
</head>
<body>
  <div class="shell">
    <div class="topbar">
      <div>
        <div class="title">FLSS Hours Saved Ledger</div>
        <div class="hint">Measure human time eliminated from order to delivery.</div>
      </div>
      <div class="controls">
        <select id="rangeSelect">
          <option value="today">Today</option>
          <option value="week">Week</option>
          <option value="month" selected>Month</option>
          <option value="year">Year</option>
        </select>
        <select id="rateSelect"></select>
        <button id="seedBtn" type="button">Seed Demo Events</button>
        <button id="refreshBtn" type="button">Refresh</button>
      </div>
    </div>

    <div class="grid cards" id="kpiCards"></div>

    <div class="row">
      <div class="card">
        <div class="label">Savings by Stage</div>
        <div class="stage-list" id="stageBreakdown"></div>
      </div>
      <div class="card">
        <div class="label">Minutes Per Order (Admin Only)</div>
        <div class="value small" id="minutesCompare">--</div>
        <div class="hint">Baseline manual vs FLSS current.</div>
      </div>
    </div>

    <div class="row">
      <div class="card">
        <div class="label">Top 10 Actions by Time Saved</div>
        <table>
          <thead><tr><th>Action</th><th>Count</th><th>Hours Saved</th></tr></thead>
          <tbody id="topTimeRows"></tbody>
        </table>
      </div>
      <div class="card">
        <div class="label">Top 5 Actions by Error Cost Avoided</div>
        <table>
          <thead><tr><th>Action</th><th>Count</th><th>Error Cost Saved</th></tr></thead>
          <tbody id="topErrorRows"></tbody>
        </table>
      </div>
    </div>
  </div>

  <script type="module" src="/hours-saved.js"></script>
</body>
</html>
